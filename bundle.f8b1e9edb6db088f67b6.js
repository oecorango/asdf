!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var s=n.getElementsByTagName("script");if(s.length)for(var c=s.length-1;c>-1&&!t;)t=s[c--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();var t=e.p+"assets/image/mine.png";const n=document.querySelector("body");var s=async function(e,s,c){n.classList.add("body");const i=document.querySelector(".main"),a=e*s,o=document.createElement("div");n.classList.contains("body_night")?(o.classList.add("field"),o.classList.add("field_night")):o.classList.add("field"),100===a&&o.classList.add("field-eazy"),225===a&&o.classList.add("field-medium"),625===a&&o.classList.add("field-hard");const l=await async function(e,t,n){return[...Array(e*t).keys()].sort((()=>Math.random()-.5)).slice(0,n)}(e,s,c);for(let e=0;e<a;e+=1){const n=document.createElement("div");n.classList.add("cell");const s=document.createElement("div");if(s.classList.add("item"),l.includes(e)){const e=new Image;e.src=t,e.classList.add("item-mine__image"),s.classList.add("item-mine"),s.append(e)}n.append(s),o.append(n)}i.append(o)},c=e.p+"assets/image/cat.gif",i=e.p+"assets/image/cat1.gif";const a=document.querySelector("body");let o=!0;function l(){return o}let d=0;async function r(){const e=document.querySelector(".time");d+=1,e.textContent=`Time: ${d}s`,"start"===f&&setTimeout((()=>{r()}),1e3),"end"===f&&(d=0)}var u=e.p+"assets/image/win.png",m=e.p+"assets/image/lose.png";let f="start";var L=async function(e,n,s){f="start";const c=document.querySelector(".cat"),i=document.querySelector(".game-over"),a=document.querySelector(".field"),o=document.querySelectorAll(".item-mine"),L=document.querySelectorAll(".item"),y=document.querySelector(".clicks"),g=[...a.children],p=new Audio,h=new Audio,v=[];L.forEach((e=>{v.push(e)}));const w=[];function E(e,t){return e>=0&&e<n&&t>=0&&t<n}function b(t,n){if(!E(t,n))return!1;const s=t*e+n;return w.includes(s)}o.forEach((e=>{const t=v.indexOf(e);w.push(t)}));let _=n*e-s,q=0;async function x(o,r){if(y.textContent=`Clicks: ${q}`,!E(o,r))return;const L=o*e+r,p=g[L],S=v[L];if(p.classList.contains("cell-on")&&S.classList.contains("item-on"))return;if(_===n*e-s&&b(o,r)){p.innerHTML='<div class="item"></div>';let e=0;for(;w.includes(e);)e+=1;w.push(e),w.splice(w.indexOf(L),1),g[e].removeChild(v[e]);const n=document.createElement("div");n.classList.add("item"),n.classList.add("item-mine");const s=new Image;s.src=t,s.classList.add("item-mine__image"),n.append(s),g[e].append(n),v.splice(0),document.querySelectorAll(".item").forEach((e=>{v.push(e)}))}if(p.classList.add("cell-on"),S.classList.add("item-on"),b(o,r))return f="stop",l()&&async function(){h.src="./assets/lose.mp3",h.play()}(),void a.childNodes.forEach(((e,t)=>{e.classList.contains("cell-off")&&e.firstChild.classList.contains("item-mine")?e.classList.add("cell-true"):e.classList.contains("cell-off")&&!e.firstChild.classList.contains("item-mine")?e.classList.add("cell-false"):e.classList.add("cell-on"),e.classList.remove("cell-question"),setTimeout((()=>{e.firstChild.hasChildNodes()&&e.firstChild.classList.add("item-on"),t===g.length&&(c.src=m,f="end",i.classList.add("game-over_on"))}),5*(t+=1))}));if(_-=1,0===_)return c.src=u,f="end",void await async function(e,t){const n=document.querySelector(".game-win");n.classList.add("game-win_on"),n.firstChild.textContent=`Hooray!\nYou found all mines\nin ${e} seconds\nand ${t} moves!`;const s=new Audio;l()&&async function(){s.src="./assets/win.mp3",s.play()}()}(d,q);const C=function(e,t){let n=0;for(let s=-1;s<=1;s+=1)for(let c=-1;c<=1;c+=1)b(e+c,t+s)&&(n+=1);return n}(o,r);if(0!==C&&!b(o,r))return p.classList.add(`item-${C}`),p.classList.remove("cell-question"),p.classList.remove("cell-off"),void(p.innerText=C);if(0===C)for(let e=-1;e<=1;e+=1)for(let t=-1;t<=1;t+=1)p.classList.remove("cell-question"),p.classList.remove("cell-off"),x(o+t,r+e)}a.addEventListener("click",(t=>{if("cell"!==t.target.className)return;"Time: 0s"===document.querySelector(".time").textContent&&r();const n=g.indexOf(t.target),s=Math.floor(n/e),c=n%e;q+=1,y.textContent=`Clicks: ${q}`,l()&&!b(s,c)&&async function(){p.src="./assets/click.mp3",p.play()}(),x(s,c)}))},y=async function(){document.querySelector("body").innerHTML=""};let g=10,p=10,h=10,v="eazy";!async function e(t,n,u,m){await async function(){d=0}(),await async function(e){const t=document.createElement("main");t.classList.add("main");const n=document.createElement("header");n.classList.add("header");const s=document.createElement("h1");s.classList.add("header__text"),s.innerText="MinesWeeper";const o=new Image;o.classList.add("cat"),o.src=c;const l=document.createElement("div");l.classList.add("info");const d=document.createElement("div");d.classList.add("time"),d.textContent="Time: 0s";const r=document.createElement("div");r.classList.add("mines"),r.innerText=`Mines: ${e}`;const u=document.createElement("div");u.classList.add("count-flags"),u.innerText=`Flags: ${e}`;const m=document.createElement("div");m.classList.add("clicks"),m.innerText="Clicks: 0",n.append(s,o),l.append(d,r,u,m),t.append(l),a.append(n,t),a.classList.contains("body_night")&&(o.src=i,s.classList.add("header__text_night"))}(u),await async function(e){const t=document.querySelector("main"),n=document.createElement("div");n.classList.add("settings");const s=document.createElement("button");s.classList.add("button"),s.id="new-game",s.textContent="New Game",n.append(s);const c=document.createElement("select");function i(e,t){const n=document.createElement("option");n.value=e,n.textContent=t,c.append(n)}c.classList.add("size"),c.id="size",i("eazy","Size: 10 x 10"),i("medium","Size: 15 x 15"),i("hard","Size: 25 x 25");const a=document.createElement("input");a.id="resize-mines",a.type="range",a.value=e,a.setAttribute("min","10"),a.setAttribute("max","99");const o=document.createElement("button");o.classList.add("button"),o.classList.add("button__night-theme");const d=document.createElement("button");d.classList.add("button"),d.classList.add("button__sound"),l()||d.classList.add("button__sound_off");const r=document.createElement("p");r.classList.add("all-mines"),r.textContent=a.value,n.append(s,c,a,r,o,d),t.append(n)}(m),await s(t,n,u),await async function(){const e=document.querySelector(".main"),t=document.createElement("div");t.classList.add("game-over"),t.innerHTML="<p>Game Over</p>";const n=document.createElement("button");n.classList.add("button"),n.id="try-again",n.innerText="Try again",t.append(n),e.append(t)}(),await async function(){const e=document.querySelector(".main"),t=document.createElement("div");t.classList.add("game-win"),t.innerHTML="<p>You win!</p>";const n=document.createElement("button");n.classList.add("button"),n.id="win-game",n.innerText="Play again?",t.append(n),e.append(t)}(),await L(t,n,u),await async function(e,t){const n=document.querySelector(".field"),s=[...n.children],c=document.querySelector(".count-flags"),i=new Audio;let a=t;n.addEventListener("contextmenu",(t=>{t.preventDefault();const n=s.indexOf(t.target),o=Math.floor(n/e),d=n%e;t.target.classList.contains("cell")&&(t.target.classList.contains("cell-off")||t.target.classList.contains("cell-question")?t.target.classList.contains("cell-off")?(a+=1,c.textContent=`Flags: ${a}`,function(t,n){const c=s[t*e+n];c.classList.contains("cell-on")||(c.classList.remove("cell-off"),c.classList.add("cell-question"))}(o,d)):function(t,n){const c=s[t*e+n];c.classList.contains("cell-on")||(c.classList.remove("cell-off"),c.classList.remove("cell-question"))}(o,d):a>0&&(a-=1,c.textContent=`Flags: ${a}`,l()&&async function(){i.src="./assets/flag.mp3",i.play()}(),function(t,n){const c=s[t*e+n];c.classList.contains("cell-on")||c.classList.toggle("cell-off")}(o,d),"Time: 0s"===document.querySelector(".time").textContent&&r()))}))}(t,u),await async function(){document.querySelector(".button__night-theme").addEventListener("click",(()=>(()=>{const e=document.querySelector(".body"),t=document.querySelector(".field"),n=document.querySelector(".cat"),s=document.querySelector(".header__text"),a=document.querySelector(".button__night-theme");e.classList.toggle("body_night"),t.classList.toggle("field_night"),s.classList.toggle("header__text_night"),a.classList.toggle("button__night-theme_on"),n.src===c?n.src=i:n.src=c})()))}(),await async function(){const e=document.querySelector(".button__sound");e.addEventListener("click",(()=>(e.classList.toggle("button__sound_off"),void(o=!0!==o))))}();const f=document.getElementById("new-game"),w=document.getElementById("win-game"),E=document.getElementById("try-again");f.addEventListener("click",(async()=>{await y(),await e(g,p,h)})),w.addEventListener("click",(async()=>{await y(),await e(g,p,h)})),E.addEventListener("click",(async()=>{await y(),await e(g,p,h)})),await async function(){const e=document.getElementById("size");e.children[0].removeAttribute("selected",""),e.children[1].removeAttribute("selected",""),e.children[2].removeAttribute("selected",""),"eazy"===v&&e.children[0].setAttribute("selected",""),"medium"===v&&e.children[1].setAttribute("selected",""),"hard"===v&&e.children[2].setAttribute("selected",""),e.addEventListener("change",(function(){"eazy"===this.value&&(v="eazy",g=10,p=10),"medium"===this.value&&(v="medium",g=15,p=15),"hard"===this.value&&(v="hard",g=25,p=25),e.value=v}))}(),await async function(){const e=document.getElementById("resize-mines"),t=document.querySelector(".all-mines");e.value=h,t.textContent=e.value,e.addEventListener("change",(function(){h=this.value,t.textContent=this.value}))}()}(g,p,h)}();