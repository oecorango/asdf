!function(){"use strict";var e={657:function(e,t,a){a.r(t)},724:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.createWinnerAPI=t.getWinnersAPI=t.startAllCarAPI=t.stopCarAPI=t.driveCarAPI=t.startCarAPI=t.editCarAPI=t.removeCarAPI=t.createCarAPI=t.getCarsOnPageAPI=t.getCarAPI=t.getCarsAPI=void 0;const n=a(553);t.getCarsAPI=async()=>{const e=await fetch(`${n.URL}${n.PATH_MAP.garage}`);try{return await e.json()}catch(e){console.warn(e)}return null},t.getCarAPI=async e=>{const t=await fetch(`${n.URL}${n.PATH_MAP.garage}/${e}`);try{return await t.json()}catch(e){console.warn(e)}return null},t.getCarsOnPageAPI=async e=>{const t=await fetch(`${n.URL}${n.PATH_MAP.garage}?_page=${e}&_limit=7`);try{return await t.json()}catch(e){console.warn(e)}return null},t.createCarAPI=async e=>{const t=await fetch(`${n.URL}${n.PATH_MAP.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{return await t.json()}catch(e){console.warn(e)}return null},t.removeCarAPI=async e=>{const t=await fetch(`${n.URL}${n.PATH_MAP.garage}/${e}`,{method:"DELETE"});try{return await t.json()}catch(e){console.warn(e)}return null},t.editCarAPI=async e=>{const t=await fetch(`${n.URL}${n.PATH_MAP.garage}/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{return await t.json()}catch(e){console.warn(e)}return null},t.startCarAPI=async(e,t)=>{const a=await fetch(`${n.URL}${n.PATH_MAP.engine}?id=${e}&status=${t}`,{method:"PATCH",body:JSON.stringify(t)});try{const e=await a.json();return e.distance/e.velocity}catch(e){console.warn(e)}return null},t.driveCarAPI=async function(e,t){const a=await fetch(`${n.URL}${n.PATH_MAP.engine}?id=${e}&status=${t}`,{method:"PATCH",body:JSON.stringify(t)});try{return await a.json()}catch(e){console.warn(e)}return null},t.stopCarAPI=async function(e,t){const a=await fetch(`${n.URL}${n.PATH_MAP.engine}?id=${e}&status=${t}`,{method:"PATCH",body:JSON.stringify(t)});try{return await a.json()}catch(e){console.warn(e)}return null},t.startAllCarAPI=async function(e,t){const a=e.map((e=>fetch(`${n.URL}${n.PATH_MAP.engine}?id=${e.id}&status=${t}`,{method:"PATCH",body:JSON.stringify(t)})));try{return await Promise.all(a)}catch(e){console.warn(e)}return null},t.getWinnersAPI=async function(e=1){return fetch(`${n.URL}${n.PATH_MAP.winners}?_page=${e}&_limit=10`).then((async e=>e.ok?e.json():null))},t.createWinnerAPI=async function(e,t,a=1){const r={id:e,wins:a,time:t},c=await fetch(`${n.URL}${n.PATH_MAP.winners}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});try{return await c.json()}catch(e){console.warn(e)}return null}},70:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.createOneHangaredCarsParams=t.createCarParams=void 0;const n=a(553),r=a(724);t.createCarParams=async function(){const e=document.querySelector('[data-id="name-car-to-create"]'),t=document.querySelector('[data-id="color-car-to-create"]');if(e&&t){const a=await(0,r.createCarAPI)({name:e.value,color:t.value});return e.value="",a}return null},t.createOneHangaredCarsParams=async function(){for(let e=0;e<100;e+=1){const e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),a=`${n.FIRST_NAME[e]} ${n.LAST_NAME[t]}`,c=[255*Math.random(),255*Math.random(),255*Math.random()],o=`rgb(${Math.floor(c[0])},${Math.floor(c[1])},${Math.floor(c[2])})`;(0,r.createCarAPI)({name:a,color:o})}}},674:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.editCarParams=void 0;const n=a(724);t.editCarParams=async function(e){const t=document.querySelector('[data-id="name-car-to-edit"]'),a=document.querySelector('[data-id="color-car-to-edit"]'),r=document.querySelector('[data-name="edit-car"]');return t&&a&&r?await(0,n.editCarAPI)({id:e,name:t.value,color:a.value}):null}},8:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.clickHandler=void 0;const n=a(70),r=a(452),c=a(226),o=a(65),i=a(465),d=a(974),s=a(815),l=a(566);t.clickHandler=async function(){!function(){const e=document.querySelectorAll('[data-name="general"]');e.forEach((t=>{t.addEventListener("click",(()=>{document.querySelectorAll("section").forEach((e=>e.classList.toggle("hidden"))),e.forEach((e=>e.disabled?e.disabled=!1:e.disabled=!0))}))}))}(),function(){const e=document.querySelector('[data-name="create"]');e&&e.addEventListener("click",(async()=>{(0,n.createCarParams)().then((e=>(0,r.createOneCar)(e))),(0,d.changeNumberCarsInGarage)("add"),(0,d.onOffPrevButton)(),await(0,d.onOffNextButton)()}))}(),(0,c.clickPrevNextBtn)(),(0,o.clickRemoveCarBtn)(),(0,i.clickSelectCarBtn)(),function(){const e=document.querySelector('[data-name="generate"]');e&&e.addEventListener("click",(async()=>{(0,n.createOneHangaredCarsParams)(),(0,d.changeNumberCarsInGarage)("add-100"),(0,d.onOffPrevButton)(),await(0,d.onOffNextButton)()}))}(),(0,s.clickStartStopCar)(),(0,l.startStopRace)()}},452:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.createOneCar=t.createCars=void 0;const n=a(553),r=a(974);t.createCars=async function(e,t){const a=Array.isArray(e)?[...e]:[e];document.querySelector(".garage_cars")||(0,r.createElement)(".garage","div",["garage_cars"]);const n=7*(t-1),c=n+7;a.slice(n,c).forEach((e=>{e.id&&(0,r.createCar)(e.id,e.name,e.color)}))},t.createOneCar=async function(e){document.querySelectorAll(".car").length<n.CARS_ON_PAGE&&e&&e.id&&(0,r.createCar)(e.id,e.name,e.color)}},226:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.clickPrevNextBtn=void 0;const n=a(724),r=a(974),c=a(452);t.clickPrevNextBtn=function(){document.querySelectorAll('[data-name="pagination"]').forEach((e=>{e.addEventListener("click",(async()=>{const t=(0,r.currentPageGarage)(),a=t-1,o=t+1,i=document.querySelector(".current_garage-page"),d=await(0,n.getCarsAPI)();await(0,r.removeAllCars)(),d&&("prev"===e.dataset.id&&(await(0,c.createCars)(d,a),i&&(i.innerText=`Page #${a}`)),"next"===e.dataset.id&&(await(0,c.createCars)(d,o),i&&(i.innerText=`Page #${o}`))),(0,r.onOffPrevButton)(),await(0,r.onOffNextButton)()}))}))}},65:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.clickRemoveCarBtn=void 0;const n=a(724),r=a(974);t.clickRemoveCarBtn=function(){const e=document.querySelector(".garage_cars");e&&e.addEventListener("click",(t=>{e.querySelectorAll('[data-name="remove"]').forEach((e=>{if(e===t.target){const t=e.dataset.id;t&&((0,n.removeCarAPI)(Number(t)),(0,r.removeOneCar)(Number(t)),(0,r.changeNumberCarsInGarage)("remove"))}}))}))}},465:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.clickSelectCarBtn=void 0;const n=a(674),r=a(974);let c=1;function o(){(0,n.editCarParams)(Number(c)).then((e=>(0,r.editCar)(e))),(0,r.disabledEditCarElement)()}t.clickSelectCarBtn=function(){const e=document.querySelector(".garage_cars");e&&e.addEventListener("click",(t=>{e.querySelectorAll('[data-name="select"]').forEach((e=>{e===t.target&&((0,r.enabledEditCarElement)(),c=Number(e.dataset.id),function(){const e=document.querySelector('[data-name="edit-car"]');e?.addEventListener("click",o,{once:!0})}())}))}))}},566:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.startStopRace=void 0;const n=a(724),r=a(553),c=a(292),o=a(974);t.startStopRace=async function(){const e=document.querySelector('[data-name="race"]'),t=document.querySelector('[data-name="reset"]');e&&e.addEventListener("click",(async()=>{const e=(0,o.currentPageGarage)(),t=await(0,n.getCarsOnPageAPI)(e);t&&async function(e){const t=document.querySelector(".garage_cars");if(t){const a=t.offsetWidth-r.WIDTH_GARAGE_PADDING;(0,c.driveAllCars)(e,a),e.forEach((e=>{if(e.id){const a=t.querySelectorAll(`[data-id="${e.id}"]`);(0,c.disEnCarButtons)(a)}}))}}(t)})),t&&t.addEventListener("click",(async()=>{const e=(0,o.currentPageGarage)(),t=await(0,n.getCarsOnPageAPI)(e);t&&async function(e){const t=document.querySelector(".garage_cars");t&&e.forEach((e=>{if(e.id){const a=t.querySelectorAll(`[data-id="${e.id}"]`);(0,c.stopCar)(e.id,a)}}))}(t)}))}},815:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.clickStartStopCar=void 0;const n=a(292),r=a(553);t.clickStartStopCar=function(){const e=document.querySelector(".garage_cars");e&&e.addEventListener("click",(t=>{e.querySelectorAll('[data-name="a"], [data-name="b"]').forEach((a=>{if(a===t.target&&"a"===a.dataset.name){const t=a.dataset.id,c=e.querySelectorAll(`[data-id="${t}"]`),o=e.offsetWidth-r.WIDTH_GARAGE_PADDING;(0,n.driveCar)(Number(t),o,c)}})),e.querySelectorAll('[data-name="b"]').forEach((a=>{if(a===t.target){const t=a.dataset.id,r=e.querySelectorAll(`[data-id="${t}"]`);(0,n.stopCar)(Number(t),r)}}))}))}},553:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_NAME=t.FIRST_NAME=t.WIGHT_CAR=t.CADRES=t.MILLISECOND=t.WIDTH_GARAGE_PADDING=t.WINNERS_ON_PAGE=t.CARS_ON_PAGE=t.START_PAGE_GARAGE=t.OPTIONS_MAP=t.PATH_MAP=t.URL=void 0,t.URL="http://127.0.0.1:3000",t.PATH_MAP={garage:"/garage",engine:"/engine",winners:"/winners"},t.OPTIONS_MAP={started:"started",drive:"drive",stopped:"stopped"},t.START_PAGE_GARAGE=1,t.CARS_ON_PAGE=7,t.WINNERS_ON_PAGE=10,t.WIDTH_GARAGE_PADDING=150,t.MILLISECOND=1e3,t.CADRES=350,t.WIGHT_CAR=50,t.FIRST_NAME=["Coronatae","Rhizostomeae","Semaeostomeae","Nausithoidaess","Paraphyllinidae","Periphyllidae","Catostylidae","Lobonematidae","Stomolophidae","Atollidae"],t.LAST_NAME=["Cassiopeidae","Cepheidae","Mastigiidae","Thysanostomatidae","Versurigidae","Cyaneidae","Drymonematidae","Pelagiidae","Phacellophoridae","Ulmaridae"]},292:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.driveAllCars=t.stopCar=t.driveCar=t.disEnCarButtons=void 0;const n=a(724),r=a(535),c=a(553);let o=null;function i(e,t,a){const n=document.querySelector(`[data-id="image-${e}"]`);if(n){let e=n.offsetLeft-c.WIGHT_CAR;const r=a/c.MILLISECOND*c.CADRES,i=(t-n.offsetLeft)/r,d=()=>(e+=i,n.style.transform=`translateX(${e}px)`,e<t&&(o=requestAnimationFrame(d)),e);d()}}async function d(e){e.forEach((e=>{const t=e;e.disabled?t.disabled=!1:t.disabled=!0}))}t.disEnCarButtons=d,t.driveCar=async function(e,t,a){d(a);const r=await(0,n.startCarAPI)(e,c.OPTIONS_MAP.started);i(e,t,Number(r)),!await(0,n.driveCarAPI)(e,c.OPTIONS_MAP.drive)&&o&&cancelAnimationFrame(o)},t.stopCar=async function(e,t){o&&cancelAnimationFrame(o),d(t),function(e){const t=document.querySelector(`[data-id="image-${e}"]`);t&&(t.style.transform="translateX(0px)")}(e),(0,n.stopCarAPI)(e,c.OPTIONS_MAP.stopped)},t.driveAllCars=async function(e,t){const a=await(0,n.startAllCarAPI)(e,c.OPTIONS_MAP.started);if(a){let e=0;a?.map((async a=>{const d=a.url.split("id=")[1].replace("&"," ").split(" ")[0],s=await a.json(),l=s.distance/s.velocity;i(Number(d),t,Number(l));const u=await(0,n.driveCarAPI)(Number(d),c.OPTIONS_MAP.drive);u||o&&cancelAnimationFrame(o),u&&0===e&&(e=l/1e3,(0,n.createWinnerAPI)(Number(d),e),(0,r.createWinCar)({id:Number(d),wins:1,time:e}))}))}}},974:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.editCar=t.disabledEditCarElement=t.enabledEditCarElement=t.onOffNextButton=t.onOffPrevButton=t.changeNumberCarsInGarage=t.removeOneCar=t.removeAllCars=t.currentPageGarage=t.createCar=t.createImage=t.createInput=t.createButton=t.createElement=void 0;const r=a(553),c=a(724),o=n(a(637)),i=n(a(243));function d(e,t,a,n,r){const c=document.querySelector(e),o=document.createElement(t);o.classList.add(...a),n&&(o.innerText=n),r&&(o.dataset.id=r),c?.append(o)}function s(e,t,a,n){const r=document.querySelector(e),c=document.createElement("button");c.textContent=t,a&&(c.dataset.id=a.id,c.dataset.name=a.name),n&&(c.disabled=!0),r?.append(c)}function l(e,t,a,n,r){const c=document.querySelector(e),o=new Image;o.src=t,a&&(o.style.background=a),n&&o.classList.add(n),r&&(o.dataset.id=r),c?.append(o)}function u(){const e=document.querySelector(".current_garage-page"),t=e?.innerText.split("#")[1];return Number(t)}t.createElement=d,t.createButton=s,t.createInput=function(e,t,a,n){const r=document.querySelector(e),c=document.createElement("input");c.type=t,a&&(c.dataset.id=a),n&&(c.disabled=!0),r?.append(c)},t.createImage=l,t.createCar=function(e,t,a){d(".garage_cars","div",["car",`car_${e}`]),d(`.car_${e}`,"div",["option",`option-${e}`]),s(`.option-${e}`,"SELECT",{name:"select",id:`${e}`}),s(`.option-${e}`,"REMOVE",{name:"remove",id:`${e}`}),d(`.option-${e}`,"h3",[],`${t}`,`text-${e}`),d(`.car_${e}`,"div",["track",`track-${e}`]),d(`.track-${e}`,"div",[`car_motor-${e}`]),s(`.car_motor-${e}`,"A",{name:"a",id:`${e}`}),s(`.car_motor-${e}`,"B",{name:"b",id:`${e}`},"disabled"),l(`.car_motor-${e}`,o.default,`${a}`,"",`image-${e}`),l(`.track-${e}`,i.default,"","finish")},t.currentPageGarage=u,t.removeAllCars=async function(){const e=document.querySelector(".garage_cars");e?.replaceChildren()},t.removeOneCar=function(e){const t=document.querySelector(`.car_${e}`);t?.remove()},t.changeNumberCarsInGarage=function(e){const t=document.querySelector(".cars_in-garage");if(t){let a=null;const n=t.innerText.split("#")[1];"add"===e&&(a=Number(n)+1),"add-100"===e&&(a=Number(n)+100),"remove"===e&&(a=Number(n)-1),t.innerText=`Medusas in pool #${a}`}},t.onOffPrevButton=function(){const e=document.querySelector('[data-id="prev"]'),t=u();t===r.START_PAGE_GARAGE&&e&&(e.disabled=!0),t>r.START_PAGE_GARAGE&&e&&(e.disabled=!1)},t.onOffNextButton=async function(){const e=document.querySelector('[data-id="next"]'),t=u(),a=await(0,c.getCarsAPI)();if(a){const n=Math.ceil(a.length/7);t===n&&e&&(e.disabled=!0),t<n&&e&&(e.disabled=!1)}},t.enabledEditCarElement=function(){const e=document.querySelector('[data-id="name-car-to-edit"]'),t=document.querySelector('[data-id="color-car-to-edit"]'),a=document.querySelector('[data-name="edit-car"]');e&&t&&a&&(e.disabled=!1,t.disabled=!1,a.disabled=!1)},t.disabledEditCarElement=function(){const e=document.querySelector('[data-id="name-car-to-edit"]'),t=document.querySelector('[data-id="color-car-to-edit"]'),a=document.querySelector('[data-name="edit-car"]');e&&t&&a&&(e.disabled=!0,e.value="",t.disabled=!0,a.disabled=!0)},t.editCar=async function(e){if(e){const t=e.id,a=e.name,n=e.color,r=document.querySelector(`[data-id="text-${t}"]`),c=document.querySelector(`[data-id="image-${t}"]`);r&&c&&(r.innerText=a,c.style.background=n)}}},346:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.createGaragePage=void 0;const n=a(724),r=a(452),c=a(553),o=a(974);t.createGaragePage=async function(){(0,o.createButton)("body","TO GARAGE",{name:"general",id:""},"disabled"),(0,o.createButton)("body","TO WINNERS",{name:"general",id:""}),(0,o.createElement)("body","section",["garage"]),(0,o.createElement)("body","section",["winners","hidden"]),(0,o.createElement)(".garage","div",["create_car"]),(0,o.createInput)(".create_car","text","name-car-to-create"),(0,o.createInput)(".create_car","color","color-car-to-create"),(0,o.createButton)(".create_car","Create medusa",{name:"create",id:""}),(0,o.createElement)(".garage","div",["edit_car"]),(0,o.createInput)(".edit_car","text","name-car-to-edit","disabled"),(0,o.createInput)(".edit_car","color","color-car-to-edit","disabled"),(0,o.createButton)(".edit_car","Edit medusa",{name:"edit-car",id:""},"disabled"),(0,o.createElement)(".garage","div",["race"]),(0,o.createButton)(".race","RACE",{name:"race",id:""}),(0,o.createButton)(".race","RESET",{name:"reset",id:""}),(0,o.createButton)(".race","GENERATE Medusas",{name:"generate",id:""}),await async function(){const e=await(0,n.getCarsAPI)();if(e){const t=e.length,a=c.START_PAGE_GARAGE;(0,o.createElement)(".garage","h2",["cars_in-garage"],`Medusas in pool #${t}`),(0,o.createElement)(".garage","h2",["current_garage-page"],`Page #${a}`)}}();const e=await(0,n.getCarsAPI)();e&&(0,r.createCars)(e,c.START_PAGE_GARAGE),await async function(){const e=await(0,n.getCarsAPI)();if(e){const t=e.length;(0,o.createElement)(".garage","div",["pagination_button"]),(0,o.createButton)(".pagination_button","PREV",{name:"pagination",id:"prev"},"disabled"),t>c.CARS_ON_PAGE?(0,o.createButton)(".pagination_button","NEXT",{name:"pagination",id:"next"}):(0,o.createButton)(".pagination_button","NEXT",{name:"pagination",id:"next"},"disabled")}}()}},535:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createWinnersPage=t.createWinCar=void 0;const r=a(724),c=a(553),o=a(974),i=n(a(637)),d=["Number","Car","Name","Wins","Best time"];let s=1;async function l(e){const t=e.id,a=await(0,r.getCarAPI)(t);if(a){const t=document.querySelector(".tbody"),n=document.createElement("tr"),r=document.createElement("th");r.textContent=s.toString(),s+=1;const c=document.createElement("th"),o=document.createElement("img");o.src=i.default,o.style.background=a.color,c.append(o);const d=document.createElement("th");d.textContent=a.name;const l=document.createElement("th");l.textContent=e.wins.toString();const u=document.createElement("th");u.textContent=e.time.toFixed(2),n?.append(r,c,d,l,u),t?.append(n)}}t.createWinCar=l,t.createWinnersPage=async function(){await async function(){const e=await(0,r.getWinnersAPI)();if(e){const t=e.length,a=c.START_PAGE_GARAGE;(0,o.createElement)(".winners","h2",["cars_in-garage"],`Winners #${t}`),(0,o.createElement)(".winners","h2",["current_garage-page"],`Page #${a}`),await async function(e){(0,o.createElement)(".winners","table",["winners_table"]),(0,o.createElement)(".winners_table","thead",["thead"]),(0,o.createElement)(".thead","tr",["headerRow"]),d.forEach((e=>{(0,o.createElement)(".headerRow","th",[],`${e}`,`${e}`)})),(0,o.createElement)(".winners_table","tbody",["tbody"]),e.forEach((async e=>l(e)))}(e),(0,o.createElement)(".winners","div",["winners_pag_button"]),(0,o.createButton)(".winners_pag_button","PREV",{name:"winners_pag",id:"winners_prev"},"disabled"),t>c.WINNERS_ON_PAGE?(0,o.createButton)(".winners_pag_button","NEXT",{name:"winners_pag",id:"winners_next"}):(0,o.createButton)(".winners_pag_button","NEXT",{name:"winners_pag",id:"winners_next"},"disabled")}}()}},637:function(e,t,a){e.exports=a.p+"assets/image/car.gif"},243:function(e,t,a){e.exports=a.p+"assets/image/finish.png"}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var c=t[n]={exports:{}};return e[n].call(c.exports,c,c.exports,a),c.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){a(657);const e=a(8),t=a(346),n=a(535);!async function(){try{await(0,t.createGaragePage)(),await(0,n.createWinnersPage)(),await(0,e.clickHandler)()}catch(e){console.warn(e)}}()}()}();